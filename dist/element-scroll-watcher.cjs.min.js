"use strict";function t(t,e){return{x:/left|right|center/g.test(t)?t:parseInt(t,10),y:/top|bottom|middle/g.test(e)?e:parseInt(e,10)}}class e{constructor(e,i){var s;this.id=(s=s||7,Math.random().toString(35).substr(2,s)),this.element=e,this.element.dataset.eswId=this.id,this.datumPointX=e.dataset.eswCheckX?t(e.dataset.eswCheckX,0).x:i.checkX,this.datumPointY=e.dataset.eswCheckY?t(0,e.dataset.eswCheckY).y:i.checkY,this.activeTimer=e.dataset.eswDelay?parseInt(e.dataset.eswDelay,10):i.option.activeDelay,this._isIntersecting=!1,this.timer=null,this.activeFunction=i.option.active,this.deActiveFunction=i.option.deActive,this.directFunction=i.option.direct}set isIntersecting(t){t!==this._isIntersecting&&null!==this.timer&&(window.clearTimeout(this.timer),this.timer=null),t||this.deActiveFunction&&this.deActiveFunction(this.element),this._isIntersecting=t}get percentY(){const{element:t,datumPointY:e}=this,i=t.getBoundingClientRect(),s=(()=>{if("string"!=typeof e)return e;switch(e){case"top":return 0;case"bottom":return i.height;default:return i.height/2}})(),n=window.innerHeight;return(n-(i.y+s))/n*100}get percentX(){const{element:t,datumPointX:e}=this,i=t.getBoundingClientRect(),s=(()=>{if("string"!=typeof e)return e;switch(e){case"left":return 0;case"right":return i.width;default:return i.width/2}})(),n=window.innerWidth;return(n-(i.x+s))/n*100}direct(){this._isIntersecting&&this.directFunction&&this.directFunction(this.element)}active(){const{activeTimer:t}=this;null===this.timer&&(this.timer=window.setTimeout((()=>{this._isIntersecting&&this.activeFunction&&this.activeFunction(this.element)}),t),this.direct())}deActive(){null!==this.timer&&(window.clearTimeout(this.timer),this.timer=null),this.deActiveFunction&&this.deActiveFunction(this.element)}}function i(t){return"string"==typeof t?Array.from(document.querySelectorAll(t)):t.length?Array.from(t):t?[t]:void 0}const s={root:null,activePercentY:60,deActivePercentY:90,activePercentX:0,deActivePercentX:100,activeDelay:1e3,threshold:.1,direct:null,active:null,deActive:null,scroll:null,init:!0,checkY:"top",checkX:"left"};module.exports=class{constructor(e,n={}){const c=Object.assign({},s,n);c.root=null===c.root?window:c.root;const o=i(e),r=t(c.checkX,c.checkY),h=r.y,d=r.x,l=new IntersectionObserver((t=>{t.forEach((t=>{const e=t.target;if(this.getEswObj(e).esw.isIntersecting=t.isIntersecting,t.isIntersecting)this.checkItems.push(e);else{const t=this.checkItems.indexOf(e);t>=0&&this.checkItems.splice(t,1)}}))}));Object.assign(this,{option:c,items:o,io:l,checkItems:[],checkY:h,checkX:d,eswObject:{},isInit:!1,isDisable:!1,boundMot:null}),c.init&&this.init()}getEswObj(t){const e=t.dataset.eswId;return{element:t,id:e,esw:this.eswObject[e]}}static mot(){if(!this.isDisable){const{checkItems:t,option:e}=this;t.forEach((t=>{const i=this.getEswObj(t),s=i.esw.percentY,n=i.esw.percentX,c=i.esw._isIntersecting,o=e.activePercentY<s,r=e.deActivePercentY<s,h=e.activePercentX<n,d=e.deActivePercentX<n;o&&h?r||d?i.esw.deActive():i.esw.active():i.esw.deActive();const l={x:n,y:s};e.scroll&&e.scroll(t,l,c)}))}}init(){const{items:t,io:i,option:s,mot:n}=this;this.boundMot=n.bind(this),this.isInit||s.root.addEventListener("scroll",this.boundMot,!1),t.forEach((t=>{if(!t.dataset.eswInit){const n=new e(t,this);this.eswObject[n.id]=n,i.observe(t,s.threshold),t.dataset.eswInit="init"}})),this.isInit=!0,window.addEventListener("load",(()=>{this.mot()})),this.mot()}update(t){const e=i(t);this.items=this.items.concat(e),this.init()}disable(){this.isDisable=!0}enable(){this.isDisable=!1}destroy(){const{items:t,io:e,option:i}=this;i.root.removeEventListener("scroll",this.boundMot,!1),t.forEach((t=>{e.unobserve(t),delete t.dataset.eswId,delete t.dataset.eswInit})),delete this.boundMot,delete this.io,delete this.items,delete this.checkItems,delete this.checkY,delete this.checkX,delete this.eswObject,delete this.isInit,delete this.isDisable,delete this.option}};
//# sourceMappingURL=element-scroll-watcher.cjs.min.js.map
